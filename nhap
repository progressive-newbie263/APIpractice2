// JavaScript to handle the edit button clicks and show the popup form with dynamic labels

document.querySelectorAll('.edit-btn').forEach((button) => {
  button.addEventListener('click', () => {
    const fieldType = button.closest('.field').querySelector('label').getAttribute('for');

    // Set the popup label based on the field type
    let label;
    switch (fieldType) {
      case 'password':
        label = 'New Password';
        break;
      case 'name':
        label = 'New Name';
        break;
      case 'location':
        label = 'New Location';
        break;
      default:
        label = 'New Value';
    }

    // Create the popup HTML with dynamic label
    const popupHTML = `
      <div class="popup">
        <div class="popup-content">
          <h2>Update ${fieldType.charAt(0).toUpperCase() + fieldType.slice(1)}</h2>
          <form id="updateForm">
            <label for="currentPassword">Current Password:</label>
            <input type="password" id="currentPassword" name="currentPassword" required>
            
            <label for="newValue">${label}:</label>
            <input type="${fieldType === 'password' ? 'password' : 'text'}" id="newValue" name="newValue" required>
            
            <label for="confirmNewValue">Confirm ${label}:</label>
            <input type="${fieldType === 'password' ? 'password' : 'text'}" id="confirmNewValue" name="confirmNewValue" required>

            <button type="submit">Update</button>
            <button type="button" id="cancelButton">Cancel</button>
          </form>
        </div>
      </div>
    `;

    // Append popup to the body
    document.body.insertAdjacentHTML('beforeend', popupHTML);

    // Handle form submission
    document.getElementById('updateForm').addEventListener('submit', (e) => {
      e.preventDefault();

      const currentPassword = document.getElementById('currentPassword').value;
      const newValue = document.getElementById('newValue').value;
      const confirmNewValue = document.getElementById('confirmNewValue').value;

      if (newValue !== confirmNewValue) {
        alert("New value and confirmation do not match.");
        return;
      }

      // Placeholder check for current password (implement real check here)
      if (currentPassword === 'your_actual_password') {
        alert(`${fieldType.charAt(0).toUpperCase() + fieldType.slice(1)} updated successfully!`);
        document.querySelector(`#user-${fieldType}`).innerText = newValue;
        document.querySelector('.popup').remove();
      } else {
        alert("Current password is incorrect.");
      }
    });

    // Handle cancel button
    document.getElementById('cancelButton').addEventListener('click', () => {
      document.querySelector('.popup').remove();
    });
  });
});
,